"use strict";const input=document.querySelector(".js_input"),submitBtn=document.querySelector(".js_submit_Btn"),resetBtn=document.querySelector(".js_reset_Btn"),resultsList=document.querySelector(".js_results_list"),favoritesList=document.querySelector(".js_favorites_list"),apiURL="https://api.jikan.moe/v4/anime?q=",noImage="https://cdn.myanimelist.net/img/sp/icon/apple-touch-icon-256.png",placeholderImage="https://via.placeholder.com/225x200/ffffff/666666/?text=sin%20imagen%20%20:(";let animes=[];function handleInput(e){e.preventDefault(),animes=[],resultsList.innerHTML="Cargando...";const i=input.value.toLowerCase();fetch(`${apiURL}${i}`).then(e=>e.json()).then(e=>{animes=e.data,console.log(animes),renderAnime()})}function renderAnime(){resultsList.innerHTML="";for(const e of animes)e.images.jpg.image_url===noImage?resultsList.innerHTML+=`\n        <li id="${e.mal_id}" class="list-item js_list_item">\n          ${e.title} \n          <img class="anime-image" src="${placeholderImage}">\n        </li>`:resultsList.innerHTML+=`\n      <li id="${e.mal_id}" class="list-item js_list_item">\n        ${e.title} \n        <img class="anime-image" src="${e.images.jpg.image_url}">\n      </li>`;listenerAnimes()}console.log(animes),submitBtn.addEventListener("click",handleInput);let animeFavs=[];function handleClick(e){const i=parseInt(e.currentTarget.id),n=animes.find(e=>e.mal_id===i),t=animeFavs.findIndex(e=>e.mal_id===i);console.log(t),console.log(animeFavs),-1===t?animeFavs.push(n):animeFavs.splice(t,1),favStorage(),renderFavorites()}function renderFavorites(){favoritesList.innerHTML="";for(const e of animeFavs)favoritesList.innerHTML+=`\n  <li id="${e.mal_id}" class="list-item js_list_item">\n    ${e.title} \n    <img class="anime-image" src="${e.images.jpg.image_url}">\n  </li>`}function listenerAnimes(){const e=document.querySelectorAll(".js_list_item");for(const i of e)i.addEventListener("click",handleClick)}function favStorage(){localStorage.setItem("Anime favorites",JSON.stringify(animeFavs))}